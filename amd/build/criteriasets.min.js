define ("assignfeedback_structured/criteriasets",["jquery","core/ajax","core/notification","core/str","core/templates","core/modal_factory","core/modal_events"],function(a,b,c,d,e,f,g){function h(a,d,f,g){var h=a.getBody(),i=a.getFooter(),j=i.find("[data-action=\"refresh\"]"),k=j.width(),l=i.find(".loading-icon");j.hide();l.css({marginLeft:k/2+"px",marginRight:k/2+"px"});l.show();var m=b.call([{methodname:"assignfeedback_structured_get_criteriasets",args:{contextid:d,includeshared:!f}}]);m[0].done(function(a){var b={contextId:d,manage:f,canPublish:g,ownedSets:a.ownedsets,sharedSets:a.sharedsets};e.render("assignfeedback_structured/criteriasets",b).done(function(a,b){e.replaceNodeContents(h,a,b);l.hide();j.show()}).fail(c.exception)}).fail(c.exception)}return{init:function init(b,i,j,k,l){d.get_strings([{key:"criteriasetssaved",component:"assignfeedback_structured"},{key:"criteriasetsmanage",component:"assignfeedback_structured"}]).done(function(d){var m={contextId:b,manage:i,canPublish:j,ownedSets:k,sharedSets:l},n=d[0],o=a("#id_assignfeedback_structured_critset");if(i){n=d[1];o=a("#id_assignfeedback_structured_critsetsmanage")}e.render("assignfeedback_structured/criteriasets_footer",{manage:i}).done(function(a){f.create({title:n,body:e.render("assignfeedback_structured/criteriasets",m),footer:a,large:!1},o).done(function(a){var c=a.getFooter().find("[data-action=\"refresh\"]");c.on("click",function(){h(a,b,i,j)});a.getRoot().on(g.shown,function(){h(a,b,i,j)})}).fail(c.exception)}).fail(c.exception)});if(!i){var m=a("#id_assignfeedback_structured_critset");e.render("core/loading",{}).done(function(a,b){e.appendNodeContents(m.parent(),a,b);m.siblings(".loading-icon").hide()}).fail(c.exception)}}}});
//# sourceMappingURL=criteriasets.min.js.map
